<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ShadowCache Demo - Offline-First Caching Engine</title>
  <link rel="stylesheet" href="styles.css">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸŒ‘</text></svg>">
</head>
<body>
  <!-- Animated Background -->
  <div class="animated-bg">
    <div class="bg-circle"></div>
    <div class="bg-circle"></div>
    <div class="bg-circle"></div>
  </div>

  <div class="container">
    <header>
      <div class="logo-container">
        <div class="logo-shadow">ğŸŒ‘</div>
        <h1>ShadowCache</h1>
      </div>
      <p class="subtitle">Modern offline-first caching with predictive intelligence</p>
      <div class="feature-badges">
        <span class="badge">ğŸš€ Zero Config</span>
        <span class="badge">ğŸ§  Predictive</span>
        <span class="badge">ğŸ“¡ Offline-First</span>
        <span class="badge">ğŸ”„ Delta Sync</span>
      </div>
    </header>

    <!-- Connectivity Status -->
    <section class="status-card">
      <h2>Connectivity Status</h2>
      <div class="status-indicator">
        <div id="connectivity-status" class="status-badge offline">
          <span class="status-dot"></span>
          <span id="connectivity-text">Offline</span>
        </div>
        <button id="toggle-offline" class="btn btn-secondary">Toggle Offline Mode</button>
      </div>
    </section>

    <!-- Cache Status Dashboard -->
    <section class="status-card">
      <h2>Cache Status</h2>
      <div class="stats-grid">
        <div class="stat-item">
          <div class="stat-label">Storage Used</div>
          <div id="storage-used" class="stat-value">0 KB</div>
        </div>
        <div class="stat-item">
          <div class="stat-label">Cached Resources</div>
          <div id="cached-count" class="stat-value">0</div>
        </div>
        <div class="stat-item">
          <div class="stat-label">Sync Status</div>
          <div id="sync-status" class="stat-value">Idle</div>
        </div>
        <div class="stat-item">
          <div class="stat-label">Storage Level</div>
          <div id="storage-level" class="stat-value">Memory</div>
        </div>
      </div>
      <div class="storage-bar">
        <div id="storage-progress" class="storage-progress" style="width: 0%"></div>
      </div>
      <div class="storage-info">
        <span id="storage-percentage">0%</span> of available storage
      </div>
    </section>

    <!-- Sync Controls -->
    <section class="status-card">
      <h2>Sync Controls</h2>
      <div class="sync-controls">
        <button id="manual-sync" class="btn btn-primary">
          <span class="btn-icon">ğŸ”„</span>
          Trigger Manual Sync
        </button>
        <button id="clear-cache" class="btn btn-danger">
          <span class="btn-icon">ğŸ—‘ï¸</span>
          Clear Cache
        </button>
      </div>
      
      <!-- Sync Progress -->
      <div id="sync-progress-container" class="sync-progress-container" style="display: none;">
        <h3>Sync Progress</h3>
        <div class="progress-bar">
          <div id="sync-progress-bar" class="progress-fill" style="width: 0%"></div>
        </div>
        <div class="sync-stats">
          <div class="sync-stat">
            <span class="sync-stat-label">Synced:</span>
            <span id="sync-synced">0</span>
          </div>
          <div class="sync-stat">
            <span class="sync-stat-label">Conflicts:</span>
            <span id="sync-conflicts">0</span>
          </div>
          <div class="sync-stat">
            <span class="sync-stat-label">Bytes:</span>
            <span id="sync-bytes">0</span>
          </div>
          <div class="sync-stat">
            <span class="sync-stat-label">Duration:</span>
            <span id="sync-duration">0ms</span>
          </div>
        </div>
      </div>
    </section>

    <!-- Cached Resources List -->
    <section class="status-card">
      <h2>Cached Resources</h2>
      <div class="resource-filters">
        <input type="text" id="resource-filter" placeholder="Filter resources..." class="filter-input">
        <select id="sort-by" class="filter-select">
          <option value="priority">Sort by Priority</option>
          <option value="age">Sort by Age</option>
          <option value="size">Sort by Size</option>
          <option value="url">Sort by URL</option>
        </select>
      </div>
      <div id="resource-list" class="resource-list">
        <div class="empty-state">No cached resources yet. Try fetching some data!</div>
      </div>
    </section>

    <!-- Test API Endpoints -->
    <section class="status-card">
      <h2>ğŸ§ª Test API Endpoints</h2>
      <p class="section-description">Try fetching data, then toggle offline mode to see caching in action!</p>
      <div class="api-controls">
        <button class="btn btn-primary" onclick="fetchData('/api/users')">
          <span class="btn-icon">ğŸ‘¥</span>
          Fetch Users
        </button>
        <button class="btn btn-primary" onclick="fetchData('/api/posts')">
          <span class="btn-icon">ğŸ“</span>
          Fetch Posts
        </button>
        <button class="btn btn-primary" onclick="fetchData('/api/comments')">
          <span class="btn-icon">ğŸ’¬</span>
          Fetch Comments
        </button>
        <button class="btn btn-primary" onclick="fetchData('/api/large-data')">
          <span class="btn-icon">ğŸ“¦</span>
          Fetch Large Data
        </button>
      </div>
      <div id="api-response" class="api-response"></div>
    </section>

    <!-- Predictive Caching Visualization -->
    <section class="status-card">
      <h2>ğŸ§  Predictive Caching Engine</h2>
      <p class="section-description">Watch as ShadowCache learns your patterns and predicts what you'll need next</p>
      <div class="prediction-container">
        <div class="prediction-stats">
          <div class="prediction-stat">
            <div class="prediction-label">Patterns Learned</div>
            <div id="patterns-learned" class="prediction-value">0</div>
          </div>
          <div class="prediction-stat">
            <div class="prediction-label">Predictions Made</div>
            <div id="predictions-made" class="prediction-value">0</div>
          </div>
          <div class="prediction-stat">
            <div class="prediction-label">Prefetch Queue</div>
            <div id="prefetch-queue" class="prediction-value">0</div>
          </div>
          <div class="prediction-stat">
            <div class="prediction-label">Confidence</div>
            <div id="prediction-confidence" class="prediction-value">0%</div>
          </div>
        </div>
        <div id="prediction-graph" class="prediction-graph">
          <div class="graph-placeholder">Navigation patterns will appear here as you use the app</div>
        </div>
      </div>
    </section>

    <!-- Performance Metrics -->
    <section class="status-card">
      <h2>âš¡ Performance Metrics</h2>
      <div class="metrics-grid">
        <div class="metric-card" data-metric="hit-rate">
          <div class="metric-icon">ğŸ¯</div>
          <div class="metric-label">Cache Hit Rate</div>
          <div id="cache-hit-rate" class="metric-value">0%</div>
          <div class="metric-sparkline" id="hit-rate-sparkline"></div>
        </div>
        <div class="metric-card" data-metric="response-time">
          <div class="metric-icon">âš¡</div>
          <div class="metric-label">Avg Response Time</div>
          <div id="avg-response-time" class="metric-value">0ms</div>
          <div class="metric-sparkline" id="response-time-sparkline"></div>
        </div>
        <div class="metric-card" data-metric="data-saved">
          <div class="metric-icon">ğŸ’¾</div>
          <div class="metric-label">Data Saved</div>
          <div id="data-saved" class="metric-value">0 KB</div>
          <div class="metric-sparkline" id="data-saved-sparkline"></div>
        </div>
        <div class="metric-card" data-metric="sync-ops">
          <div class="metric-icon">ğŸ”„</div>
          <div class="metric-label">Sync Operations</div>
          <div id="sync-operations" class="metric-value">0</div>
          <div class="metric-sparkline" id="sync-ops-sparkline"></div>
        </div>
      </div>
    </section>

    <!-- Live Activity Feed -->
    <section class="status-card">
      <h2>ğŸ“¡ Live Activity Feed</h2>
      <p class="section-description">Real-time events and operations happening in ShadowCache</p>
      <div id="activity-feed" class="activity-feed">
        <div class="activity-item activity-system">
          <div class="activity-icon">ğŸŒ‘</div>
          <div class="activity-content">
            <div class="activity-title">System Ready</div>
            <div class="activity-time">Just now</div>
          </div>
        </div>
      </div>
    </section>

    <!-- Toast Notifications Container -->
    <div id="toast-container" class="toast-container"></div>
    
    <!-- Confetti Canvas -->
    <canvas id="confetti-canvas"></canvas>
    
    <!-- Particle Effects -->
    <canvas id="particles-canvas"></canvas>
  </div>

  <!-- Footer -->
  <footer class="footer">
    <div class="footer-content">
      <p>Built with â¤ï¸ for the offline-first web</p>
      <div class="footer-links">
        <a href="https://github.com/shadowcache/shadowcache" target="_blank">GitHub</a>
        <span>â€¢</span>
        <a href="../docs/API.md">Documentation</a>
        <span>â€¢</span>
        <a href="../README.md">About</a>
      </div>
    </div>
  </footer>

  <script type="module" src="app.js"></script>
</body>
</html>""
